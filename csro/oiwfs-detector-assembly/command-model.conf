subsystem = IRIS
component = oiwfs-detector-assembly

description = "OIWFS Detector Assembly Commands."

receive = [
    {
        name = DETECTOR_EXPOSURE
        description = "Set the exposure mode for the OIWFS"
        requiredArgs = [mode]
        args = [
            {
                name = isFollowing
                description = """
* **SINGLE**: Initiate a single exposure.
* **CONTINUOUS**: continuously take exposures as instructed by NFIRAOS using the fast connection.
* **STOP**: Stop single exposure and/or continous following.
"""
                enum = [SINGLE, CONTINUOUS, STOP]
            }
        ]
    }

    {
        name = GET_ACQUISITION_TABLE
        description = "Instruct assembly to download the current OIWFS acquisition table."
        requiredArgs = [tableID]
        args = [
            {
                name = tableID
                description = "Unique table identifier."
                type=string
            }
        ]
    }

    {
        name = FOLLOW_DETECTOR
        description = """
Enable or disable OIWFS detector following, including stepping through the acquisition table to determine the correct (shrinking) window size.
"""
        requiredArgs = [isFollowing, initialRow]
        args = [
            {
                name = isFollowing
                description = "True if following."
                type=boolean
            }
            {
                name = initialRow
                description = "Initial row to go to in the acquisition table."
                type=short
            }
        ]
    }

    {
        name = DITHER_MODE
        description = "Set the OIWFS dithering mode"
        requiredArgs = [mode]
        args = [
            {
                name = mode
                description = "Dithering mode."
                enum = [ON_CHIP, POA, AUTO]
            }
        ]
    }
]
