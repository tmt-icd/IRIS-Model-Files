subsystem = IRIS
component = sc.cryoenv

publish{
    events = [
        {
            name = state
            description ="""
            Currnet state of the IRIS Cryostat Environment Assembly
            """
            maxRate = 1
            archive = true
            parameters = [
                {
                    name = cmd
                    description = "command state"
                    enum = [UNINITIALIZED,READY,BUSY,CONTINUOUS]
                }
                {
		          	name = debug
		          	description = debug level
		          	enum = [DEBUG,INFO, WARN, ERROR]
		        }
                {
                    name = engineeringMode
                    description = "Indicates whether engineering mode is enabled or disabled"
                    type = boolean
                }
                {
		          	name = cryostatEnvState
		          	description = thermal-vacuum state
		          	enum = [WARM, PUMPING, WARM_VACUUM, COOLING, COLD, WARMING, PRESSURIZING]
		        }
				{
					name = oiwfsConnected
					description = "Indicates whether IRIS is physically connected to OIWFS"
                    type = boolean
				}
                {
                    name = hcdConnections
                    description = """
                    Connection status of the HCD's under the assembly.
                    """
                    type = struct
                    parameters = [
                        {
                            name = cryoTempControlHcd
                            description = "Connection status of the temperature controller for the window and cryostat"
                            type = boolean
                        }
                        {
                            name = imgTempControlHcd
                            description = "Connection status of the temperature controller for the imager detector"
                            type = boolean
                        }
                        {
                            name = pvTempControlHcd
                            description = "Connection status of the temperature controller for the pupil viewing camera detector"
                            type = boolean
                        }
                        {
                            name = ifsTempControlHcd
                            description = "Connection status of the temperature controller for the IFS detector"
                            type = boolean
                        }
                        {
                            name = cryoTempMonitorHcd
                            description = "Connection status of the temperature monitor for the cryostat"
                            type = boolean
                        }
                        {
                            name = imgTempMonitorHcd1
                            description = "Connection status of the temperature monitor 1 for the imager mechanisms"
                            type = boolean
                        }
                        {
                            name = imgTempMonitorHcd2
                            description = "Connection status of the temperature monitor 2 for the imager mechanisms"
                            type = boolean
                        }
                        {
                            name = ifsTempMonitorHcd
                            description = "Connection status of the temperature monitor for the IFS mechanisms"
                            type = boolean
                        }
                    ]
                }
            ]
        }
        
        {
            name = windowTemperature
            description = """
            A temperature reading of sensor located on IRIS Cryostat Window to OIWFS
            """
            maxRate = 1
            archive = true
            parameters = [
                {
                    name = temperature
                    description = "Temperature sensor reading in kelvin"
                    type = double
                    units = K
                }
            ]        
        }
        {
            name = pupilDetectorTemperature
            description = """
            A temperature reading of sensor located on IRIS Imager Pupil Viewing Camera detector
            """
            ref = windowTemperature
        }
        {
            name = imgDetectorTemperature
            description = """
            A temperature reading of sensor located on IRIS Imager detectors
            """
           ref = windowTemperature
        }
        {
            name = ifsDetectorTemperature
            description = """
            A temperature reading of sensor located on IRIS IFS detector
            """
            ref = windowTemperature
        }
        {
            name = windowHeaterStatus
            description = """
            Current status of the heating element that controls the temperature of IRIS Cryostat Window to OIWFS
            """
            maxRate = 1
            archive = true
            parameters = [
                {
                    name = "output"
                    description = "Heater output in percent of maximum current/power(TBD)"
                    type = double
                }
                {
		    		name = "setpoint"
		    		description  = "current setpoint of heater control loop."
		    		type = double
	    		}
                {
		    		name = "heaterRangeStatus"
		    		description = """
                    The heater range is used to turn on/off temperature control as well as setting the output power range. High setting allows the maximum power, while the Med range provides 10% of maximum, and Low provides 1% of maximum. Also, depends on the output, only on or off options are available.
                    """
                    enum = [off, on, high, med, low]
	    		}
                {
		    		name = "rampEnabled"
		    		description = "On/Off flag of the ramp control"
		    		type = boolean
	    		}

            ]
        }
        {
            name = cryostatHeaterStatus
            description = """
            Current status of the heating element that supports IRIS Cryostat warm up
            """
            ref = windowHeaterStatus
        }
        {
            name = pupilDetectorHeaterStatus
            description = """
            Current status of the heating element that controls the temperature of IRIS Imager Pupil Viewing Camera detector
            """
            ref = windowHeaterStatus
        }
        {
            name = imgDetectorHeaterStatus
            description = """
            Current status of the heating element that controls the temperature of IRIS Imager detectors
            """
            ref = windowHeaterStatus
        }
        {
            name = ifsDetectorHeaterStatus
            description = """
            Current status of the heating element that controls the temperature of IRIS IFS detector
            """
            ref = windowHeaterStatus
        }
        {
            name = imgTemperatures
            description = """
            A List of temperature sensor readings that are located within the IRIS Imager side of cryostat. Mainly located on Imager mechanisms.The locations of the sensors are published as (#sc.cryoenv-publishes-Event-imgTemperatureLocations). The temperature readings and the sensor locations are placed in same index.
            """
            maxRate = 0
            archive = true 
            parameters = [
                {
                    name = temperatures
                    description = "Array of temperature readings. "
                    type = array
                    units = K
                    minItems = 1
                    maxItems = 8
                }
            ]
        }
        {
            name = ifsTemperatures
            description ="""
            A List of temperature sensor readings that are located within the IRIS IFS side of cryostat. Mainly located on IFS mechanisms. The locations of the sensors are published as (#sc.cryoenv-publishes-Event-ifsTemperatureLocations). The temperature readings and the sensor locations are placed in same index.
            """
            ref = imgTemperatures
        }
        {
            name = cryostatTemperatures
            description = """
            A List of temperature sensor readings that are located throught IRIS Cryostat. Used to monitor overall cryostat environment. The locations of the sensors are published as (#sc.cryoenv-publishes-Event-cryostatTemperatureLocations). The temperature readings and the sensor locations are placed in same index.
            """
            ref = imgTemperatures
        }
        {
            name = imgTemperatureLocations
            description = """
            A list of locations of sensors in (#sc.cryoenv-publishes-Event-imgTemperatures). This event will be published once upon the start-up of the assembly for the subscribers to referece sensor locations. Even though it's published only once, subscribers can get the latest published event.
            """
            maxRate = 0
            archive = true 
            parameters = [
				{
					name = temperatures
					description = "Array of temperature sensor locations. "
					type = array
					minItems = 1
					maxItems = 16
				}
            ]
        }
        {
            name = ifsTemperatureLocations
            description = """
            A list of locations of sensors in (#sc.cryoenv-publishes-Event-ifsTemperatures). This event will be published once upon the start-up of the assembly for the subscribers to referece sensor locations.
            """ 
            ref = imgTemperatureLocations
        }
        {
            name = cryostatTemperatureLocations
            description = """
            A list of locations of sensors in (#sc.cryoenv-publishes-Event-cryostatTemperatures). This event will be published once upon the start-up of the assembly for the subscribers to referece sensor locations.
            """
            ref = imgTemperatureLocations

        }
        {
            name = cryostatPressure
            description = """
            The pressure gauge reading for the entire IRIS Cryostat.
            """
            maxRate = 1
            archive = true
            parameters = [
				{
					name = pressure
					description = "Pressure reading in Torr"
					type = double
					units = "Torr"
				}
                
            ]
        }
    ]
}