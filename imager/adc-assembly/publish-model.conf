subsystem = IRIS
component = sci-adc-assembly

publish {

  description = "Telemetries published by IRIS Science Path ADC Assembly."


  telemetry = [
     {
        name = odgwShift
        description = """
        IRIS publishes the expected ADC image shifts of the (up to 4) IRIS ODGW position demands

        *Discussion: The ADC will shift an image position in a manner that depends upon the current state of the ADC. The estimated image shift (inferred from optical models) is sent from IRIS to the TCS so that the TCS can adjust the IRIS ODGW position demands accordingly. The reference wavelength used to calculate the shift is tcs.cm.iris.imgCurAtmDispersion.referenceWavelength.*
        """
        maxRate = 1
        archive = true
        archiveRate = 1
        attributes = [
            {
                name = odgw1Shift
                description  = "2 element array holding x, y values (range TBD) in the FCRS<sub>IRIS-ROT</sub>, evaluated at the reference wavelength"
                type = array
                dimensions: [2]
                items = {
                    type = double
                    units = mm
                }
            }
            {
                name = odgw2Shift
                description  = "2 element array holding x, y values (range TBD) in the FCRS<sub>IRIS-ROT</sub>, evaluated at the reference wavelength"
                type = array
                dimensions: [2]
                items = {
                    type = double
                    units = mm
                }
            }
            {
                name = odgw3Shift
                description  = "2 element array holding x, y values (range TBD) in the FCRS<sub>IRIS-ROT</sub>, evaluated at the reference wavelength"
                type = array
                dimensions: [2]
                items = {
                    type = double
                    units = mm
                }
            }
            {
                name = odgw4Shift
                description  = "2 element array holding x, y values (range TBD) in the FCRS<sub>IRIS-ROT</sub>, evaluated at the reference wavelength"
                type = array
                dimensions: [2]
                items = {
                    type = double
                    units = mm
                }
            }
        ]
	}
    {
      name = angle
      description = "Current/target angles of ADC."
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
            name = currentOrientation
            description  = """
Current orientation of ADC in FCRS<sub>IRIS-ROT</sub>.
"""
            type = float
            units = degree
        }
        {
            name = currentOrientationChangeRate
            description  = """
Current orientation change rate in FCRS<sub>IRIS-ROT</sub> calculated.
"""
            type = float
            units = degree/s
        }
        {
            name = currentSeparation
            description  = """
Current separation (differential angle of two rotary stages) in FBCS.
"""
            type = float
            units = degree
        }
        {
            name = currentSeparationChangeRate
            description  = """
Current separation change rate of ADC in FBCS.
"""
            type = float
            units = degree/s
        }
        {
            name = targetOrientation
            description  = """
Target orientation in FCRS<sub>IRIS-ROT</sub> of ADC at the time when this telemetry is issued.
"""
            type = float
            units = degree
        }
        {
            name = targetOrientationChangeRate
            description  = """
Target orientation change rate in FCRS<sub>IRIS-ROT</sub> of ADC at the time when this telemetry is issued.
"""
            type = float
            units = degree
        }
        {
            name = targetSeparation
            description  = """
Target separation of ADC at the time when this telemetry is issued.
This target value is calculated from the following information:

* dispersion curve obtained from TCS (tcs.cm.iris.imgCurAtmDispersion eventstream)
* weighing function including telescope throughput and sepectrum energy distribution of the target celestrial object sent from TSC (tcs.cm.iris.imgCurAtmDispersoion eventstream)
* transmittance of filter (iris.imager.filter.throughput telemetry)
* product of static throughput in the light path to the detector including OIWFS entrance window, IRIS Science Dewar Entrance window and other optical elements inside IRIS.
* quantum efficiency of detector.
* mechanical and alignment error (configuration)

Past information may be uesd to infer the target orientation more accurately.
"""
            type = float
            units = degree
        }
        {
            name = targetSeparationChangeRate
            description  = """
Target separation change rate of ADC at the time when this telemetry is issued.
"""
             type = float
             units = degree/s
        }
      ]
    }
    {
      name = status
      description = "Current general ADC status."
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
            name = noMotion
            description = """
This attribute becomes true if all axes are stopped.

It can be used to check if no mechanisms are in motion in Warm Stow, End Taking Daytime Calibration Data, End Night and Stow Use Case. See [IRIS - Software Design Document (TMT.INS.PDD.14.024.DRF07)](https://docushare.tmt.org/docushare/dsweb/Get/Document-32613/160210_IRIS_SDD_DRF07.docx) for more details about those use cases.
"""
	        type = boolean
        }
        {
            name = locked
            description = """
This attribute becomes true when this assembly is locked.

It can be used to verify mechanisms are locked in Start Pumping Use Case. See [IRIS - Software Design Document (TMT.INS.PDD.14.024.DRF07)](https://docushare.tmt.org/docushare/dsweb/Get/Document-32613/160210_IRIS_SDD_DRF07.docx) for more details about this use case.
"""
            type = boolean
        }
        {
            name = state
            description  = """
Current overall state of ADC.

__TODO__: Redefine state variables as specified in the software design patterns for device and component controllers.

__TODO__: According to ICD-AOESW-IRIS-0227 in the latest [ICD AOESW-IRIS (TMT.SEN.ICD.14.006.CCR01(DRF12))](https://docushare.tmt.org/docushare/dsweb/Get/Document-31290/ICD_AOESW_IRIS_CCR01(DRF12).docx) wants to know the state of ADC, but the state set defined in ICD AOESW-IRIS is different from the above list. For example, ADC may be retracted from the science light path, but that state is not defined in ICD AOESW-IRIS. We first need to check for what AOESW wants to know the state of ADC.
"""
            type = string
        }
        {
            name = errorMessage
            description  = "Error message."
            type = string
        }
      ]
    }
    {
      name = compensation
      description = """
This telemetry conveys current compensation status for engineering purpose.
"""
      maxRate = 1
      archive = false
      attributes = [
        {
           name = referenceWavelength
           description  = """
Current reference wavelength.
"""
           type = float
           units = microns
        }
        {
           name = wavelength
           description  = """
Array of wavelength.
The number of elements is __TBD__.
The range is __TBD__.
"""
           type = array
           items = {
               type = float
               minimum = 0.5
               maximum = 3.0
           }
           units = microns
        }
        {
           name = power
           description  = """
Current absolute power (counter dispersion applied by this ADC) curve.
The number of elements is __TBD__.

__TODO__: According to ICD-AOESW-IRIS-0228 in the latest [ICD AOESW-IRIS (TMT.SEN.ICD.14.006.CCR01(DRF12))](https://docushare.tmt.org/docushare/dsweb/Get/Document-31290/ICD_AOESW_IRIS_CCR01(DRF12).docx) wants to know the power of ADC, but it is not sure if it wants to know power of different wavelengths, or power at a specific wavelength, or power at the reference wavelength. We first need to check for what AOESW wants to know the power of ADC.
"""
           type = array
           items = {
               type = float
           }
           units = arcsec
        }
        {
           name = dispersion
           description  = """
Relative atmospheric dispersion curve which this ADC currently corrects.
The number of elements is __TBD__.
"""
           type = array
           items = {
               type = float
           }
           units = arcsec
        }
        {
           name = weight
           description  = """
Total weighing function which this ADC currently uses for least-squares fitting. This is a product of all weighing functions including telescope throughput, spectral energy distribution (SED) of the target celestial body, filter throughput, ADC throughput, quantization efficiency of detector, etc. ( __TBC__ )
The number of elements is __TBD__.
"""
           type = array
           items = {
               type = float
               minimum = 0
               maximum = 1
           }
        }
        {
             name = rmse
             description  = """
Current root mean square error as a result of leat-square fitting.
"""
             type = float
             units = arcsec
             minimum = 0
        }
      ]
    }
    {
      name = compensationConf
      description = """
Current configuration for compensation calculation.

This telemetry can be used to check if the current configuration is as intended. If not, the user should edit the configuration via Configuration Service or a local file, and re-initialize this assembly so that the latest configuration will be reloaded. This telemetry is updated only when initialization is performed.
"""
      maxRate = 1
      archive = true
      attributes = [
        {
           name = wavelength
           description  = """
Array of wavelength.
The number of elements is __TBD__.
Range is __TBD__.
"""
           type = array
           items = {
               type = float
               minimum = 0.5
               maximum = 3.0
           }
           units = microns
        }
        {
           name = staticThroughput
           description  = """
Product of static throughput in the light path inside IRIS to the detector as a function of wavelength. At least, the following components are considered:

* Throughput of OIWFS entrance window.
* Throughput of IRIS Science Dewar Entrance Window.
* Quantum efficiency of the detectors.

__TBD__: More components may have to be considered.

The number of elements is __TBD__.
"""
           type = array
           items = {
               type = float
               minimum = 0
               maximum = 0
           }
           units = arcsec
        }
      ]
    }
    {
      name = upperPrism
      description = """
This telemetry contains statuses of the upper rotary stage that may change over time in slow rate (up to approximately 1 Hz).

__TBD__: It may be better to move some attributes to separate telemetry items so that all attributes in this telemtry item won't be sent over the network when only one attribute is changed.

__TODO__: Check the behavior of all statuses defined in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf). Currently, 'A stop code', 'A axis reference position', 'A axis auxiliary position', 'A axis analog input', 'A Hall Input status' and some status bits in 'A xis status' and 'A axis switches' are not used in this model. If they are useful, let them in this model.
"""
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = status
          description  = """
Current status of the upper rotary stage. Meaning of each value is as follows:  

* __HOMING__    : The rotary stage is finding home.
* __TRACKING__  : The rotary stage is tracking telescope motion and change of atmospheric dispersion.
* __ROTATING__  : The rotary stage is rotating to a designated position.
* __STOP__      : The rotary stage is not rotating.
* __UNKNOWN__   : Unknown state.
"""
          enum = [HOMING, TRACKING, ROTATING, STOP, UNKNOWN]
        }
        {
          name = angle
          description  = "Current rotation angle of the upper rotary stage in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = targetAngle
          description  = "Demanded rotation angle of the upper rotary stage in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = rawAngle
          description  = """
Current raw rotation angle of the upper rotary stage. This status corresponds to ADDR 90-93 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = targetRawAngle
          description  = """
Demanded raw rotation angle of the upper rotary stage.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = rawAngleError
          description  = """
Current raw rotation angle error of the upper rotary stage. This status corresponds to ADDR 94-97 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = homeSwitch
          description = "Current home switch state of the upper rotary stage."
          type = boolean
        }
        {
          name = motorOff
          description = """
This status corresponds to BIT 0 'Motor Off' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = finalDeceleration
          description = """
This status corresponds to BIT 3 'Motoin is making final deceleration' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status. This signal may flip very fast, so the telemetry rate may have to be very fast.
"""
          type = boolean
        }
        {
          name = stoppingForLimit
          description = """
This status corresponds to BIT 4 'Motion is stopping due to ST of Limit Switch' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'. This status supposed to be always false because there is no limit switch in the upper rotary stage.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = slewing
          description = """
This status corresponds to BIT 5 'Motion is slewing' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = negativeDirection
          description = """
This status corresponds to BIT 7 'Negative Direction Move' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = homing
          description = """
This status corresponds to BIT 12 '(FE) Find Edge in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionPAOnly
          description = """
This status corresponds to BIT 13 'Mod of Motion PA only' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionMode
          description = """
This status corresponds to BIT 14 'Mode of Motion PA or PR' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = moving
          description = """
This status corresponds to BIT 15 'Move in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = velocity
          description  = "Current velocity. This status corresponds to ADDR 102-105 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'."
          type = float
          units = mm/s
        }
        {
          name = torque
          description  = """
Current torque. This status corresponds to ADDR 106-109 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the upper rotary stage is assigned to 'A'.

__TODO__: Check what torque value is entered here. Motion controller may simply write a value corresponding the current electric current. Thus, this attribute may be useful to check the current electric current setting. This attribute would be different from actual torque applied to the axis because there is no toqrue sensor attached.
"""
          type = float
          units = mNm
        }
      ]
    }
    {
      name = upperPrismConf
      description = """
Current configuration for the upper rotary stage.

This telemetry can be used to check if the current configuration is as intended. If not, the user shoud edit the configuration via Configuration Service or a local file, and re-initialize this assembly so that the latest configuration will be reloaded. This telemetry is updated only when initialization is performed.
"""
      maxRate = 1
      archive = true
      attributes = [
        {
          name = angleOffset
          description = "Offset angle from the home switch to the 0 degree angle in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = rawAngleOffset
          description = """
Raw offset angle from the home switch to the 0 degree angle in FBCS.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = acceleration
          description = """
Acceleration of trapezoidal profile for normal rotation (rotation to the designated position, not the tracking motion). This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawAcceleration
          description = """
Raw acceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of AC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
        }
        {
          name = deceleration
          description = """
Deceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawDeceleration
          description = """
Raw deceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocity
          description = """
Maximum velocity of trapezoidal profile for normal rotation. This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = degree/s
        }
        {
          name = rawVelocity
          description = """
Raw maximum velocity of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothing
          description = """
Smoothing factor of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer.

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.
"""
          type = float
          minimum = 0.25
          maximum = 64
        }
        {
          name = accelerationHoming
          description = """
Acceleration of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawAccelerationHoming
          description = """
Raw acceleration value of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = integer
        }
        {
          name = decelerationHoming
          description = """
Deceleration of trapezoidal profile for homoing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawDecelerationHoming
          description = """
Raw deceleration value of trapezoidal profile for homing. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocityHoming
          description = """
Maximum velocity of trapezoipdal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = degree/s
        }
        {
          name = rawVelocityHoming
          description = """
Raw maximum velocity value of trapezoipdal profile for homing. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothingHoming
          description = """
Smoothing factor of trapezoidal profile for homing. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer...

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.
"""
          type = float
          minimum = 0.25
          maximum = 64
        }
      ]
    }
    {
      name = lowerPrism
      description = """
This telemetry contains statuses of the lower rotary stage that may change over time in slow rate (up to approximately 1 Hz).

__TBD__: It may be better to move some attributes to separate telemetry items so that all attributes in this telemtry item won't be sent over the network when only one attribute is changed.

__TODO__: Check the behavior of all statuses defined in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf). Currently, 'A stop code', 'A axis reference position', 'A axis auxiliary position', 'A axis analog input', 'A Hall Input status' and some status bits in 'A xis status' and 'A axis switches' are not used in this model. If they are useful, let them in this model.
"""
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = status
          description  = """
Current status of the lower rotary stage. Meaning of each value is as follows:  

* __HOMING__    : The rotary stage is finding home.
* __TRACKING__  : The rotary stage is tracking telescope motion and change of atmospheric dispersion.
* __ROTATING__  : The rotary stage is rotating to a designated position.
* __STOP__      : The rotary stage is not rotating.
* __UNKNOWN__   : Unknown state.
"""
          enum = [HOMING, TRACKING, ROTATING, STOP, UNKNOWN]
        }
        {
          name = angle
          description  = "Current rotation angle of the lower rotary stage in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = targetAngle
          description  = "Demanded rotation angle of the lower rotary stage in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = rawAngle
          description  = """
Current raw rotation angle of the lower rotary stage. This status corresponds to ADDR 90-93 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = targetRawAngle
          description  = """
Demanded raw rotation angle of the lower rotary stage.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = rawAngleError
          description  = """
Current raw rotation angle error of the lower rotary stage. This status corresponds to ADDR 94-97 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = homeSwitch
          description = "Current home switch state of the lower rotary stage."
          type = boolean
        }
        {
          name = motorOff
          description = """
This status corresponds to BIT 0 'Motor Off' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = finalDeceleration
          description = """
This status corresponds to BIT 3 'Motoin is making final deceleration' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status. This signal may flip very fast, so the telemetry rate may have to be very fast.
"""
          type = boolean
        }
        {
          name = stoppingForLimit
          description = """
This status corresponds to BIT 4 'Motion is stopping due to ST of Limit Switch' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'. This status supposed to be always false because there is no limit switch in the lower rotary stage.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = slewing
          description = """
This status corresponds to BIT 5 'Motion is slewing' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = negativeDirection
          description = """
This status corresponds to BIT 7 'Negative Direction Move' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = homing
          description = """
This status corresponds to BIT 12 '(FE) Find Edge in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionPAOnly
          description = """
This status corresponds to BIT 13 'Mod of Motion PA only' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionMode
          description = """
This status corresponds to BIT 14 'Mode of Motion PA or PR' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = moving
          description = """
This status corresponds to BIT 15 'Move in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = velocity
          description  = "Current velocity. This status corresponds to ADDR 102-105 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'."
          type = float
          units = mm/s
        }
        {
          name = torque
          description  = """
Current torque. This status corresponds to ADDR 106-109 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the lower rotary stage is assigned to 'A'.

__TODO__: Check what torque value is entered here. Motion controller may simply write a value corresponding the current electric current. Thus, this attribute may be useful to check the current electric current setting. This attribute would be different from actual torque applied to the axis because there is no toqrue sensor attached.
"""
          type = float
          units = mNm
        }
      ]
    }
    {
      name = lowerPrismConf
      description = """
Current configuration for the lower rotary stage.

This telemetry can be used to check if the current configuration is as intended. If not, the user shoud edit the configuration via Configuration Service or a local file, and re-initialize this assembly so that the latest configuration will be reloaded. This telemetry is updated only when initialization is performed.
"""
      maxRate = 1
      archive = true
      attributes = [
        {
          name = angleOffset
          description = "Offset angle from the home switch to the 0 degree angle in FBCS."
          type = float
          units = degree
          minimum = -180
          maximum = 180
          exclusiveMinimum = true
          exclusiveMaximum = false 
        }
        {
          name = rawAngleOffset
          description = """
Raw offset angle from the home switch to the 0 degree angle in FBCS.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = acceleration
          description = """
Acceleration of trapezoidal profile for normal rotation (rotation to the designated position, not the tracking motion). This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawAcceleration
          description = """
Raw acceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of AC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
        }
        {
          name = deceleration
          description = """
Deceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawDeceleration
          description = """
Raw deceleration of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocity
          description = """
Maximum velocity of trapezoidal profile for normal rotation. This value won't be applied to tracking motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = degree/s
        }
        {
          name = rawVelocity
          description = """
Raw maximum velocity of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothing
          description = """
Smoothing factor of trapezoidal profile for normal rotation. This value won't be applied to tracking motion. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer.

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.
"""
          type = float
          minimum = 0.25
          maximum = 64
        }
        {
          name = accelerationHoming
          description = """
Acceleration of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawAccelerationHoming
          description = """
Raw acceleration value of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = integer
        }
        {
          name = decelerationHoming
          description = """
Deceleration of trapezoidal profile for homoing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = degree/s/s
        }
        {
          name = rawDecelerationHoming
          description = """
Raw deceleration value of trapezoidal profile for homing. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocityHoming
          description = """
Maximum velocity of trapezoipdal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = degree/s
        }
        {
          name = rawVelocityHoming
          description = """
Raw maximum velocity value of trapezoipdal profile for homing. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothingHoming
          description = """
Smoothing factor of trapezoidal profile for homing. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer...

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.
"""
          type = float
          minimum = 0.25
          maximum = 64
        }
      ]
    }
    {
      name = retractionAxis
      description = """
This telemetry contains statuses of the linear stage that may change over time in slow rate (up to approximately 1 Hz).

__TBD__: It may be better to move some attributes to separate telemetry items so that all attributes in this telemtry item won't be sent over the network when only one attribute is changed.

__TODO__: Check the behavior of all statuses defined in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf). Currently, 'A stop code', 'A axis reference position', 'A axis auxiliary position', 'A axis analog input', 'A Hall Input status' and some status bits in 'A xis status' and 'A axis switches' are not used in this model. If they are useful, let them in this model.
"""
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = positionStatus
          description = """
Summary of the linear stage.

* __IN__     : ADC is inserted in the science light path and ready for observation using ADC.
* __HALFWAY__: Some motion is on-going, or ADC is not in either the inserted position or the retracted position.
* __OUT__    : ADC is completely retracted from the sicence light path and ready for the observation which does not use ADC.
* __UNKNOWN__: Unknown state.
"""
	  enum = [IN, HALFWAY, OUT, UNKNOWN]
        }
        {
          name = position
          description  = """
Current position of the linear stage.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = targetPosition
          description  = """
Demanded position of the linear stage.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawPosition
          description  = """
Current raw position of the linear stage. This status corresponds to ADDR 90-93 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = targetRawPosition
          description  = """
Demanded raw position of the linear stage.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = rawPositionError
          description  = """
Current raw position error of the linear stage. This status corresponds to ADDR 94-97 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = reverseLimit
          description = "Current status of reverse limit switch. This status corresponds to BIT 2 of ADDR 84 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'."
          type = boolean
        }
        {
          name = forwardLimit
          description = "Current status of forward limit switch. This status corresponds to BIT 3 of ADDR 84 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'."
          type = boolean
        }
        {
          name = motorOff
          description = """
This status corresponds to BIT 0 'Motor Off' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

 __TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = finalDeceleration
          description = """
This status corresponds to BIT 3 'Motoin is making final deceleration' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status. This signal may flip very fast, so the telemetry rate may have to be very fast.
"""
          type = boolean
        }
        {
          name = stoppingForLimit
          description = """
This status corresponds to BIT 4 'Motion is stopping due to ST of Limit Switch' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status. This signal may flip very fast, so the telemetry rate may have to be very fast.
"""
          type = boolean
        }
        {
          name = slewing
          description = """This status corresponds to BIT 5 'Motion is slewing' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = negativeDirection
          description = """This status corresponds to BIT 7 'Negative Direction Move' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = homing
          description = """
This status corresponds to BIT 12 '(FE) Find Edge in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionPAOnly
          description = """This status corresponds to BIT 13 'Mod of Motion PA only' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = motionMode
          description = """
This status corresponds to BIT 14 'Mode of Motion PA or PR' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = moving
          description = """This status corresponds to BIT 15 'Move in Progress' of ADDR 82 - 83 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check the actual meaning of this status.
"""
          type = boolean
        }
        {
          name = velocity
          description  = "Current velocity. This status corresponds to ADDR 102-105 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'."
          type = float
          units = mm/s
        }
        {
          name = torque
          description  = """
Current torque. This status corresponds to ADDR 106-109 in Data Record of [DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) if the linear stage is assigned to 'A'.

__TODO__: Check what torque value is entered here. Motion controller may simply write a value corresponding the current electric current. Thus, this attribute may be useful to check the current electric current setting. This attribute would be different from actual torque applied to the axis because there is no toqrue sensor attached.
"""
          type = float
          units = mNm
        }
      ]
    }
    {
      name = retractionAxisConf
      description = """
Current configuration for the linear stage.

This telemetry can be used to check if the current configuration is as intended. If not, the user shoud edit the configuration via Configuration Service or a local file, and re-initialize this assembly so that the latest configuration will be reloaded. This telemetry is updated only when initialization is performed.
"""
      maxRate = 1
      archive = true
      attributes = [
        {
          name = insertedPosition
          description = """
Inserted position.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawInsertedPosition
          description = """
Raw inserted position.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = insertedPositionDelta
          description = """
Acceptable positioning deviation at the inserted position.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawInsertedPositionDelta
          description = """
Raw acceptable positioning deviation at the inserted position.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = retractedPosition
          description = """
Retracted position.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawRetractedPosition
          description = """
Raw retracted position.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = retractedPositionDelta
          description = """
Acceptable positioning deviation at the retracted position.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawRetractedPositionDelta
          description = """
Raw acceptable positioning deviation at the retracted position.

__TODO__: Define maximum and minimum value.
"""
          type = integer
        }
        {
          name = acceleration
          description = """
Acceleration of trapezoidal profile for normal insertion and retraction motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = mm/s/s
        }
        {
          name = rawAcceleration
          description = """
Raw acceleration value of trapezoidal profile for normal insertion and retraction motion. This value corresponds to the argument of AC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
        }
        {
          name = deceleration
          description = """
Deceleration of trapezoidal profile for normal insertion and retraction motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = mm/s/s
        }
        {
          name = rawDeceleration
          description = """
Raw deceleration value of trapezoidal profile for normal insertion and retraction motion. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocity
          description = """
Maximum velocity of trapezoipdal profile for normal insertion and retraction motion.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = mm/s
        }
        {
          name = rawVelocity
          description = """
Raw maximum velocity value of trapezoipdal profile for normal insertion and retraction motion. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothing
          description = """
Smoothing factor of trapezoidal profile for normal insertion and retraction motion. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer...

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.
"""
          type = float
          minimum = 0.25
          maximum = 64
        }
        {
          name = accelerationHoming
          description = """
Acceleration of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = float
          units = mm/s/s
        }
        {
          name = rawAccelerationHoming
          description = """
Raw acceleration value of trapezoidal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to accelerate to the top speed.
"""
          type = integer
        }
        {
          name = decelerationHoming
          description = """
Deceleration of trapezoidal profile for homoing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = float
          units = mm/s/s
        }
        {
          name = rawDecelerationHoming
          description = """
Raw deceleration value of trapezoidal profile for homing. This value corresponds to the argument of DC command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = velocityHoming
          description = """
Maximum velocity of trapezoipdal profile for homing.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.

__TBD__: Don't we need to define base velocity (start/stop velocity)? Couldn't find equivalent parameter in [Manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf).
"""
          type = float
          units = mm/s
        }
        {
          name = rawVelocityHoming
          description = """
Raw maximum velocity value of trapezoipdal profile for homing. This value corresponds to the argument of SP command.

__TODO__: Define maximum and minimum value. Minimum value should be larger than meaningful value. Do not allow extremly low value which may lead to very very long time to decelerate to zero.
"""
          type = integer
        }
        {
          name = smoothingHoming
          description = """
Smoothing factor of trapezoidal profile for homing. See 'Motion Smoothing' chapter in [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf) for more details. The argument of KS command corresponds to this factor. 0.25 means no smoothing, and 64 means the maximum smoothing.

__TODO__: Check if the type should be integer or float. According to [the manual of DMC-40x0](http://www.galilmotioncontrol.com/download/manual/man_40x0.pdf), this value is 'an integer from 0.25 to 64 and represents the amount of smoothing', but 0.25 is not an integer...

__TBD__: Maybe it would be useful to map this value to the range between 0 to 1 for simplicity.

"""
          type = float
          minimum = 0.25
          maximum = 64
        }
        {
          name = softwareLimits
          description = "Software limits of the linear stage. If the positioner goes over this range, an alarm is activated."
          type = array
          dimensions: [2]
          items = {
            type = float
          }
          units = mm
        }
        {
          name = supressSoftwareLimitAlarm
          description = "Indicates whether the alarm for the software limits is supressed. This configuration is useful to supress the alarm when an instrument specialist forcibly moves the linear stage (using an engineering screen) over the software limit range for maintenance."
          type = boolean
          default = false
        }
      ]
    }
  ]

  alarms = [
    {
      name = misstep
      description = """
Indicates a misstep of one of the stepper motors.

The actual scheme to detect missteps is TBD.

When this alarm happens, the operator is expected to acknowledges this alarm and perform datum again. If this alarm is repeated many times, it indicates severe damage of the mechanisms and the observer is expected to report this problem to an instrument specialist.

This alarm is latched.
"""
      severity = major
      archive = true
    }
    {
      name = stall
      description = """
Indicates that one or more stages do not respond, and this assembly cannot do the job.

Note that the observer can ignore this alarm if she or he does not use the cold stop, but shall report this problem to an instrument specialist. The communication failure between Galil HCD and the motion controller would also trigger this alarm.

This alarm is latched.
"""
      severity = major
      archive = true
    }
    {
      name = comFailure
      description = """
This alarm indicates the lost communication with the underlying Galil HCD.

This alarm is NOT latched.
"""
      severity = minor
      archive = true
    }
    {
      name = unexpectedMotion
      description = """
This alarm is raised when Galil HCD reports any motion of stages, but this assembly does not expect it. This alarm is normally raised when Galil HCD is commanded not from the assembly, but from, for example, engineering GUI directly.

When this alarm happens, the observer is expected to execute stop command if the on-going motion is not what the observer expects. 

This alarm is latched.
"""
      severity = major
      archive = true
    }
    {
      name = inconsistentStatus
      description = """
This alarm is raised when the statuses reported by Galil HCD are inconsistent with what this assembly currently expects. For example, the home switch may be turned on for some reason even if the stage is not moving and the current position is very far from the home position. It shouldnt happen, but if it happens, this alarm is raised.

When this alarm happens, the observer is expected to check the statuses of this assembly. The observer can ignore this alarm and continue their observation if they think this alarm is not severe, but it is expected that the observer reports this issue to the instrument specialist after their observation. The observer may want to stop their observation when she or he finds this assembly behaving weirdly after this alarm, or if this alarm is repeatedly raised.

This alarm is latched.
"""
      severity = major
      archive = true
    }
   {
      name = hardwareLimit
      description = """
This alarm is activated when the linear stage hits a limit switch.

This alarm must not happen during an observation. If it does, this alarm shall be reported to an instrument expert.

This alarm is latched.
"""
      severity = major
      archive = true
    }
    {
      name = trackingFailure
      description = """
This alarm is activated when a stage cannot keep tracking motion.

It may happen when the event streams from TCS are not delivered to this assembly at the prescribed rate, or before the deadline. It may also happen when Galil HCD or the motion controller do not respond as expected during the tracking motion.

If this alarm is continuously being raised, the observer or the operator may want to stop the current exposure. If this alarm does not last for a long time, the observer has an option to keep the current exposure and do not use the readouts taken during that time to create a science raw frame. Note that, even if the event streams are not delivered before the deadline, this assembly (or the underlying HCD) tries to keep the tracking motion extrapolating the previous positional demands. Thus, normally, the observers can ignore this alarm.

This alarm is NOT latched.
"""
      severity = minor
      archive = true
    }
   ]
}
